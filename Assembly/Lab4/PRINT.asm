;编写者：	张丹朱
;同组同学：	胡超

	
;子程序名：	PRINT
;功能：		将学生成绩进行排序
;入口参数：
;无
;出口参数：
;在显示频上输出排序后信息
;所使用的寄存器：
;AL――存放输入的排序方式（'c'/'m'/'e'/'a'）
;AH,DX――用于系统功能调用


NAME	PRINT
EXTRN	RNUM:WORD, RANK:WORD, FLAG:WORD, F2T10:NEAR
PUBLIC	PRINT
INCLUDE	MACRO.LIB
.386
DATA    SEGMENT USE16	PUBLIC

MNOTS	DB	0AH, "Please Sort First!", 0AH, '$'
MOK	DB	0AH, "THAT'S ALL SORTED!", 0AH, 0AH, '$'
DATA	ENDS

CODE	SEGMENT	USE16	PUBLIC
	ASSUME	CS:CODE, DS:DATA
PRINT	PROC
	PUSH	EAX
	PUSH	EDX
	PUSH	DI
	PUSH	SI
	XOR	SI, SI
PRINTS:	CMP	SI, RNUM
	JG	OK		;超过最大下标则结束
	MOV	DI, RANK[ESI*2]
	PUSH	DI
	CMP	FLAG, 10
	JZ	CHIN
	CMP	FLAG, 11
	JZ	MATH
	CMP	FLAG, 12
	JZ	ENGL
	CMP	FLAG, 13
	JZ	AVER
	JMP	NOTS

;找到首地址
CHIN:	SUB	DI, 10
	JMP	PRINTC
MATH:	SUB	DI, 11
	JMP	PRINTC
ENGL:	SUB	DI, 12
	JMP	PRINTC
AVER:	SUB	DI, 13
	JMP	PRINTC

PRINTC:	TWO	[DI]
	INC	DI
	CMP	BYTE PTR [DI], 0
	JNZ	PRINTC
	POP	DI
	TWO	20H
	MOVSX	EAX, BYTE PTR [DI]
	MOV	DX, 32
	CALL	F2T10
	TWO	0AH
	INC	SI
	JMP	PRINTS

NOTS:	NINE	MNOTS
	JMP	LAST
OK:	NINE	MOK

LAST:	POP	SI
	POP	DI
	POP	EDX
	POP	EAX
	RET
PRINT	ENDP
CODE	ENDS
	END